---
import Layout from "../layouts/Layout.astro";
import ThemeToggle from "../components/ThemeToggle";
import DollarSection from "../components/dashboard/DollarSection";
import FortniteSeasonTimer from "../components/dashboard/FortniteSeasonTimer";
import LoLSeasonTimer from "../components/dashboard/LoLSeasonTimer";
import ValorantSeasonCountdown from "../components/ValorantSeasonCountdown";
import AddNew from "../components/dashboard/AddNew";
import DevCard from "../components/dashboard/DevCard";
import LegalCard from "../components/dashboard/LegalCard";

const currentDate = new Date().toLocaleDateString("en-US", {
	month: "short",
	day: "numeric",
	year: "numeric",
});

const shortDate = new Date().toLocaleDateString("en-US", {
	month: "short",
	day: "numeric",
});
---

<Layout title="Essentials">
	<header class="relative z-50 w-full p-4 md:px-8 md:py-6 shrink-0 max-w-[1400px] mx-auto sticky top-0 md:static">
		<div class="flex items-center justify-between bg-[var(--color-surface)]/80 md:bg-transparent p-2.5 px-4 md:p-0 rounded-2xl md:rounded-none shadow-sm md:shadow-none border border-[var(--color-border)] md:border-none backdrop-blur-md md:backdrop-blur-none transition-all duration-300">
			<!-- Logo e Ícono -->
			<div class="flex items-center gap-2 md:gap-3">
				<div class="flex items-center justify-center size-8 md:size-10 rounded-lg md:rounded-xl bg-primary/10 text-primary shadow-sm md:shadow-none">
					<span class="material-symbols-outlined text-[18px] md:text-[24px]">grid_view</span>
				</div>
				<h1 class="text-xl md:text-2xl font-bold tracking-tight text-[var(--color-text-main)] font-montserrat">
					Essentials
				</h1>
			</div>

			<!-- Acciones -->
			<div class="flex items-center gap-2 md:gap-4">
				<!-- Botón Fecha -->
				<div class="group flex items-center justify-center h-8 md:h-10 px-3 md:px-4 rounded-full bg-[var(--color-background)]/50 md:bg-[var(--color-surface)] md:shadow-sm border border-[var(--color-border)] md:border-[var(--color-border)] text-[0.7rem] md:text-sm font-medium transition-all hover:border-primary/30 text-[var(--color-text-main)]">
					<span class="material-symbols-outlined text-[14px] md:text-[18px] mr-1.5 md:mr-2 text-[var(--color-text-muted)] group-hover:text-primary transition-colors duration-300">calendar_month</span>
					<span class="hidden md:block truncate">{currentDate}</span>
					<span class="block md:hidden truncate">{shortDate}</span>
				</div>
				
				<!-- Theme Toggle -->
				<div class="flex items-center justify-center bg-[var(--color-background)]/50 md:bg-transparent rounded-full border border-[var(--color-border)] md:border-transparent p-0.5 md:p-0 transition-all hover:border-primary/30 scale-90 md:scale-100 origin-center">
					<ThemeToggle client:load />
				</div>
			</div>
		</div>
	</header>

	<main class="relative z-10 flex-1 w-full flex flex-col items-center pb-12">
		<div
			class="w-full max-w-[440px] md:max-w-[1400px] mx-auto px-6 md:px-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 auto-rows-[minmax(240px,auto)]"
		>
			<DollarSection client:load />

			<ValorantSeasonCountdown client:load />

			<div class="hidden">
				<FortniteSeasonTimer client:load />
			</div>

			<div class="hidden">
				<LoLSeasonTimer client:load />
			</div>

			<LegalCard />
			
			<DevCard />

			<AddNew />
		</div>
	</main>
</Layout>
